{% extends "base.html" %}
{% block title %}建物マッチング(2D) API デモ{% endblock %}
{% block head %}
    {{ super() }}
    <style>
        .leaflet-container {
            height: 400px;
            width: 600px;
            max-width: 100%;
            max-height: 100%;
        }

        textarea.full {
            width: 600px;
            height: 240px;
        }
    </style>
{% endblock %}
{% block content %}
<div id="inputbox">
    <p>検索したい建物のGeoJSONを入力（オレンジ）</p>
    <button id="sample1">サンプル1</button>
    <button id="sample2">サンプル2</button>
    <button id="sample3">サンプル3</button><br />
    <textarea id="geojson" name="geojson" class="full"></textarea><br />
    <button id="draw">地図表示</button>
    <button id="match">マッチング</button>
</div>

<div id="map"></div>

<div>
    <p>検索結果のGeoJSON（グリーン）</p>
    <textarea id="result" name="result" class="full" readonly="readonly"></textarea><br />
</div>

<script>
    var map = L.map('map').setView([35.0954,138.8635], 15);
    var layers = [];

    var tiles = L.tileLayer('https://cyberjapandata.gsi.go.jp/xyz/pale/{z}/{x}/{y}.png', {
        maxZoom: 18,
        attribution: '&copy; <a href="https://maps.gsi.go.jp/development/ichiran.html">地理院タイル</a>'
    }).addTo(map);

    function drawInputGeoJSON() {
        for (layer of layers) {
            map.removeLayer(layer);
        }
        layers = [];

        var geojson = $("#geojson").val();
        var target_object = JSON.parse(geojson);
        var geojson_layer = L.geoJson(
            target_object, {
            style: {
                "color": "#ff7800",
                "weight": 5,
                "opacity": 0.5
            }
        }).addTo(map);
        layers.push(geojson_layer);
        map.fitBounds(geojson_layer.getBounds());
    }

    $("#draw").on('click', function() {
        drawInputGeoJSON();
    });

    $("#match").on('click', function() {
        drawInputGeoJSON();
        // for (layer of layers) {
        //     map.removeLayer(layer);
        // }
        // layers = [];

        var geojson = $("#geojson").val();
        // var target_object = JSON.parse(geojson);
        // var geojson_layer = L.geoJson(
        //     target_object, {
        //     style: {
        //         "color": "#ff7800",
        //         "weight": 5,
        //         "opacity": 0.5
        //     }
        // }).addTo(map);
        // layers.push(geojson_layer);
        // map.fitBounds(geojson_layer.getBounds());

        $.ajax({
            contentType: "application/json",
            url: "{{ url_for('api.building2d') }}",
            dataType: "json",
            data: geojson,
            method: "POST"
        }).done(function(feature_collection) {
            $("#result").text(JSON.stringify(feature_collection));
            for (feature of feature_collection["features"]) {
                var color = (feature.properties.confidence == "high") ? "#78ff78" : "#7878ff";
                var matched_layer = L.geoJson(feature, {
                    style: {
                        "color": color,
                        "weight": 2,
                        "opacity": 0.5
                    },
                    onEachFeature: function(feature, layer) {
                        layer.bindPopup(feature.properties.plateau_bldid);
                    }
                }).addTo(map);
                layers.push(matched_layer);
            }
        }).fail(function(e) {
            alert("エラーが発生しました。");
        });
    });

    $("#sample1").on("click", function() {
        $("#geojson").val(`{"features":[{"bbox":[138.85795,35.106497,138.8583,35.106712],"geometry":{"coordinates":[[[138.857974,35.10671],[138.85795,35.106524],[138.858275,35.106497],[138.8583,35.106697],[138.858123,35.106712],[138.858121,35.106698],[138.857974,35.10671]]],"type":"Polygon"},"id":1227,"properties":{"devDate":"2022-09-07","fid":"20220906-49986-12636-s-6400","gml_id":"K17_4995012630_1227","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"}],"type":"FeatureCollection"}`);
        drawInputGeoJSON();
    });

    $("#sample2").on("click", function() {
        $("#geojson").val(`{"features":[{"bbox":[138.854039,35.107326,138.85512,35.108142],"geometry":{"coordinates":[[[138.854176,35.107571],[138.854246,35.108106],[138.854204,35.10811],[138.854208,35.108139],[138.854164,35.108142],[138.854163,35.10813],[138.854133,35.108132],[138.85413,35.108115],[138.854112,35.108116],[138.854084,35.107888],[138.854188,35.107879],[138.854185,35.107857],[138.854077,35.107867],[138.854039,35.10761],[138.854138,35.107601],[138.854134,35.107571],[138.854121,35.107572],[138.854114,35.107516],[138.854096,35.107518],[138.854092,35.107486],[138.854106,35.107484],[138.854098,35.107419],[138.854112,35.107418],[138.854109,35.107396],[138.854943,35.107326],[138.854956,35.107423],[138.854985,35.107421],[138.854994,35.107488],[138.854956,35.107492],[138.854958,35.107509],[138.854905,35.107513],[138.854903,35.107498],[138.854818,35.107505],[138.854823,35.107541],[138.854891,35.107535],[138.854915,35.107724],[138.855069,35.10771],[138.85512,35.108095],[138.854916,35.108113],[138.854871,35.107762],[138.85484,35.107765],[138.854836,35.107732],[138.85487,35.107729],[138.85485,35.10757],[138.85484,35.107571],[138.854848,35.107636],[138.85481,35.107639],[138.854802,35.107578],[138.854788,35.107579],[138.854779,35.10751],[138.854762,35.107511],[138.854767,35.107547],[138.854386,35.10758],[138.854382,35.107552],[138.854176,35.107571]]],"type":"Polygon"},"id":125,"properties":{"devDate":"2022-09-07","fid":"20220906-49986-12636-s-4643","gml_id":"K17_4995012630_125","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"堅ろう建物","vis":null},"type":"Feature"}],"type":"FeatureCollection"}`);
        drawInputGeoJSON();
    });

    $("#sample3").on("click", function() {
        $("#geojson").val(`{"features":[{"bbox":[138.85837,35.104587,138.858716,35.104743],"geometry":{"coordinates":[[[138.858384,35.104743],[138.85837,35.104645],[138.85843,35.104596],[138.858675,35.104587],[138.858698,35.10461],[138.858716,35.104717],[138.858707,35.104718],[138.858708,35.104733],[138.858689,35.104735],[138.858684,35.104719],[138.858384,35.104743]]],"type":"Polygon"},"id":1928,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5392","gml_id":"K17_4995012630_1928","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.85845,35.105214,138.858779,35.105344],"geometry":{"coordinates":[[[138.858454,35.105325],[138.85845,35.105291],[138.858583,35.105279],[138.858581,35.10522],[138.858642,35.105214],[138.858646,35.105244],[138.858767,35.105234],[138.858779,35.105301],[138.85876,35.105316],[138.85849,35.105344],[138.858454,35.105325]]],"type":"Polygon"},"id":4103,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5501","gml_id":"K17_4995012630_4103","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.858572,35.104993,138.858755,35.105101],"geometry":{"coordinates":[[[138.858584,35.105101],[138.858572,35.105024],[138.858689,35.105015],[138.858689,35.104997],[138.858742,35.104993],[138.858755,35.105086],[138.858584,35.105101]]],"type":"Polygon"},"id":10474,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5453","gml_id":"K17_4995012630_10474","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.858874,35.104578,138.859007,35.104702],"geometry":{"coordinates":[[[138.858886,35.104702],[138.858874,35.104582],[138.858976,35.104578],[138.858982,35.104599],[138.858999,35.1046],[138.859007,35.104694],[138.858886,35.104702]]],"type":"Polygon"},"id":10569,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5391","gml_id":"K17_4995012630_10569","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.859266,35.105138,138.859402,35.105264],"geometry":{"coordinates":[[[138.859386,35.105255],[138.859305,35.105264],[138.859293,35.1052],[138.85927,35.105201],[138.859266,35.105148],[138.859388,35.105138],[138.859402,35.105243],[138.859386,35.105255]]],"type":"Polygon"},"id":12129,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5485","gml_id":"K17_4995012630_12129","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.858402,35.104868,138.858649,35.104941],"geometry":{"coordinates":[[[138.858409,35.104941],[138.858402,35.104892],[138.858642,35.104868],[138.858649,35.104917],[138.858409,35.104941]]],"type":"Polygon"},"id":14058,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5434","gml_id":"K17_4995012630_14058","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.859203,35.104639,138.859344,35.10473],"geometry":{"coordinates":[[[138.859208,35.10473],[138.859203,35.104643],[138.859339,35.104639],[138.859344,35.104721],[138.859208,35.10473]]],"type":"Polygon"},"id":15539,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5398","gml_id":"K17_4995012630_15539","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.859139,35.105151,138.859259,35.105279],"geometry":{"coordinates":[[[138.85918,35.105279],[138.859177,35.105268],[138.859153,35.10527],[138.859139,35.105157],[138.85922,35.105151],[138.85923,35.105222],[138.859254,35.105222],[138.859259,35.105263],[138.859238,35.105264],[138.859239,35.105274],[138.85918,35.105279]]],"type":"Polygon"},"id":16844,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5489","gml_id":"K17_4995012630_16844","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.859205,35.104901,138.859363,35.104988],"geometry":{"coordinates":[[[138.859217,35.104988],[138.859205,35.104915],[138.85935,35.104901],[138.859363,35.104974],[138.859217,35.104988]]],"type":"Polygon"},"id":17183,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5441","gml_id":"K17_4995012630_17183","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.858386,35.104746,138.85856,35.104816],"geometry":{"coordinates":[[[138.858392,35.104816],[138.858386,35.104757],[138.858554,35.104746],[138.85856,35.104805],[138.858392,35.104816]]],"type":"Polygon"},"id":20298,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5417","gml_id":"K17_4995012630_20298","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.858425,35.105024,138.858547,35.105116],"geometry":{"coordinates":[[[138.858432,35.105116],[138.858425,35.105033],[138.85854,35.105024],[138.858547,35.105106],[138.858432,35.105116]]],"type":"Polygon"},"id":21914,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5462","gml_id":"K17_4995012630_21914","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.858842,35.105234,138.858975,35.10531],"geometry":{"coordinates":[[[138.858877,35.10531],[138.858847,35.105295],[138.858842,35.105243],[138.858967,35.105234],[138.858975,35.105302],[138.858877,35.10531]]],"type":"Polygon"},"id":26364,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5508","gml_id":"K17_4995012630_26364","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.858893,35.104767,138.859021,35.104837],"geometry":{"coordinates":[[[138.858899,35.104837],[138.858893,35.104772],[138.859016,35.104767],[138.859021,35.104831],[138.858899,35.104837]]],"type":"Polygon"},"id":29495,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5419","gml_id":"K17_4995012630_29495","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.859206,35.104785,138.859324,35.104865],"geometry":{"coordinates":[[[138.85921,35.104865],[138.859206,35.104794],[138.859318,35.104785],[138.859324,35.104848],[138.859307,35.104848],[138.859308,35.104857],[138.85921,35.104865]]],"type":"Polygon"},"id":29653,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5420","gml_id":"K17_4995012630_29653","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.858962,35.105095,138.859065,35.105196],"geometry":{"coordinates":[[[138.858978,35.105196],[138.858962,35.105104],[138.859042,35.105095],[138.859051,35.10515],[138.859062,35.10515],[138.859065,35.105186],[138.858978,35.105196]]],"type":"Polygon"},"id":30244,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5473","gml_id":"K17_4995012630_30244","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.858921,35.104941,138.859036,35.105025],"geometry":{"coordinates":[[[138.858931,35.105025],[138.858921,35.104969],[138.858964,35.104965],[138.858962,35.104947],[138.859025,35.104941],[138.859036,35.105015],[138.858931,35.105025]]],"type":"Polygon"},"id":33534,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5445","gml_id":"K17_4995012630_33534","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.858804,35.105042,138.85894,35.105108],"geometry":{"coordinates":[[[138.858814,35.105108],[138.858804,35.105053],[138.858933,35.105042],[138.85894,35.105098],[138.858814,35.105108]]],"type":"Polygon"},"id":33894,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5464","gml_id":"K17_4995012630_33894","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.859265,35.105049,138.85938,35.105126],"geometry":{"coordinates":[[[138.859273,35.105126],[138.859265,35.105059],[138.859365,35.105049],[138.85938,35.105115],[138.859273,35.105126]]],"type":"Polygon"},"id":34221,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5465","gml_id":"K17_4995012630_34221","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.858806,35.104944,138.8589,35.105028],"geometry":{"coordinates":[[[138.858808,35.105028],[138.858806,35.104951],[138.858889,35.104944],[138.8589,35.105024],[138.858808,35.105028]]],"type":"Polygon"},"id":34635,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5446","gml_id":"K17_4995012630_34635","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.858985,35.105213,138.859086,35.105297],"geometry":{"coordinates":[[[138.858997,35.105297],[138.858985,35.105222],[138.859076,35.105213],[138.859086,35.105274],[138.859072,35.10529],[138.858997,35.105297]]],"type":"Polygon"},"id":35319,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5500","gml_id":"K17_4995012630_35319","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.858447,35.105164,138.858625,35.10522],"geometry":{"coordinates":[[[138.858451,35.10522],[138.858447,35.105179],[138.858623,35.105164],[138.858625,35.105192],[138.858561,35.105198],[138.858562,35.10521],[138.858451,35.10522]]],"type":"Polygon"},"id":37758,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5491","gml_id":"K17_4995012630_37758","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.858824,35.105118,138.858956,35.105177],"geometry":{"coordinates":[[[138.858829,35.105177],[138.858824,35.105122],[138.8589,35.105118],[138.858901,35.105133],[138.858952,35.10513],[138.858956,35.105167],[138.858829,35.105177]]],"type":"Polygon"},"id":39599,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5476","gml_id":"K17_4995012630_39599","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.858439,35.105226,138.858577,35.105282],"geometry":{"coordinates":[[[138.858441,35.105282],[138.858439,35.105238],[138.858574,35.105226],[138.858577,35.10527],[138.858441,35.105282]]],"type":"Polygon"},"id":39651,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5506","gml_id":"K17_4995012630_39651","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.858429,35.105118,138.858633,35.105164],"geometry":{"coordinates":[[[138.858433,35.105164],[138.858429,35.105134],[138.858631,35.105118],[138.858633,35.105145],[138.858433,35.105164]]],"type":"Polygon"},"id":40711,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5475","gml_id":"K17_4995012630_40711","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.858394,35.104822,138.858563,35.104869],"geometry":{"coordinates":[[[138.858399,35.104869],[138.858394,35.104834],[138.85856,35.104822],[138.858563,35.104856],[138.858399,35.104869]]],"type":"Polygon"},"id":41211,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5425","gml_id":"K17_4995012630_41211","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.858794,35.104819,138.858882,35.104903],"geometry":{"coordinates":[[[138.858802,35.104898],[138.858794,35.104819],[138.858844,35.104819],[138.858847,35.104843],[138.858876,35.104843],[138.858882,35.104889],[138.85886,35.104893],[138.85886,35.104899],[138.858828,35.104903],[138.858824,35.104898],[138.858802,35.104898]]],"type":"Polygon"},"id":41862,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5423","gml_id":"K17_4995012630_41862","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.858951,35.105024,138.859053,35.105092],"geometry":{"coordinates":[[[138.858963,35.105092],[138.858951,35.105033],[138.859032,35.105024],[138.859034,35.105053],[138.859048,35.105053],[138.859053,35.105083],[138.858963,35.105092]]],"type":"Polygon"},"id":43706,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5461","gml_id":"K17_4995012630_43706","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.858899,35.104844,138.859027,35.104892],"geometry":{"coordinates":[[[138.858908,35.104892],[138.858899,35.10485],[138.859023,35.104844],[138.859027,35.104883],[138.858908,35.104892]]],"type":"Polygon"},"id":45022,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5427","gml_id":"K17_4995012630_45022","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.85921,35.104737,138.859351,35.10478],"geometry":{"coordinates":[[[138.859214,35.10478],[138.85921,35.104746],[138.859347,35.104737],[138.859351,35.104771],[138.859214,35.10478]]],"type":"Polygon"},"id":45927,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5416","gml_id":"K17_4995012630_45927","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.858659,35.10517,138.858767,35.105222],"geometry":{"coordinates":[[[138.858688,35.10522],[138.858664,35.105222],[138.858659,35.105179],[138.858763,35.10517],[138.858767,35.105214],[138.858688,35.10522]]],"type":"Polygon"},"id":46605,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5493","gml_id":"K17_4995012630_46605","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.858413,35.104969,138.858544,35.105015],"geometry":{"coordinates":[[[138.858418,35.105015],[138.858413,35.104981],[138.858539,35.104969],[138.858544,35.105002],[138.858418,35.105015]]],"type":"Polygon"},"id":48173,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5450","gml_id":"K17_4995012630_48173","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.85913,35.10509,138.859235,35.10514],"geometry":{"coordinates":[[[138.859135,35.10514],[138.85913,35.105098],[138.859228,35.10509],[138.859235,35.10513],[138.859135,35.10514]]],"type":"Polygon"},"id":48566,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5472","gml_id":"K17_4995012630_48566","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.859221,35.104996,138.859376,35.105033],"geometry":{"coordinates":[[[138.859256,35.105031],[138.859224,35.105033],[138.859221,35.105007],[138.859372,35.104996],[138.859376,35.105021],[138.859256,35.105031]]],"type":"Polygon"},"id":49063,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5454","gml_id":"K17_4995012630_49063","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.859073,35.104574,138.859119,35.104669],"geometry":{"coordinates":[[[138.859082,35.104669],[138.859073,35.104585],[138.859083,35.104574],[138.859116,35.104575],[138.859119,35.104668],[138.859082,35.104669]]],"type":"Polygon"},"id":49974,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5389","gml_id":"K17_4995012630_49974","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.858567,35.104961,138.858662,35.105006],"geometry":{"coordinates":[[[138.858571,35.105006],[138.858567,35.104966],[138.858659,35.104961],[138.858662,35.105001],[138.858571,35.105006]]],"type":"Polygon"},"id":50362,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5448","gml_id":"K17_4995012630_50362","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.85923,35.104569,138.859323,35.104626],"geometry":{"coordinates":[[[138.859237,35.104626],[138.85923,35.104569],[138.859259,35.104569],[138.859322,35.104613],[138.859323,35.104624],[138.859237,35.104626]]],"type":"Polygon"},"id":50598,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5385","gml_id":"K17_4995012630_50598","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.858841,35.105186,138.858945,35.105225],"geometry":{"coordinates":[[[138.858844,35.105225],[138.858841,35.105194],[138.858942,35.105186],[138.858945,35.105217],[138.858844,35.105225]]],"type":"Polygon"},"id":52272,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5496","gml_id":"K17_4995012630_52272","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.858897,35.10472,138.859009,35.104752],"geometry":{"coordinates":[[[138.858898,35.104752],[138.858897,35.104725],[138.859007,35.10472],[138.859009,35.104747],[138.858898,35.104752]]],"type":"Polygon"},"id":52734,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5413","gml_id":"K17_4995012630_52734","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.85911,35.104953,138.859192,35.104997],"geometry":{"coordinates":[[[138.859115,35.104997],[138.85911,35.104961],[138.859187,35.104953],[138.859192,35.104989],[138.859115,35.104997]]],"type":"Polygon"},"id":53587,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5447","gml_id":"K17_4995012630_53587","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.859116,35.105006,138.859201,35.105048],"geometry":{"coordinates":[[[138.85912,35.105048],[138.859116,35.105013],[138.859197,35.105006],[138.859201,35.10504],[138.85912,35.105048]]],"type":"Polygon"},"id":53616,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5457","gml_id":"K17_4995012630_53616","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.858659,35.105122,138.858761,35.105153],"geometry":{"coordinates":[[[138.858662,35.105153],[138.858659,35.105128],[138.858757,35.105122],[138.858761,35.105143],[138.858662,35.105153]]],"type":"Polygon"},"id":55675,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5480","gml_id":"K17_4995012630_55675","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.859122,35.105054,138.859224,35.105085],"geometry":{"coordinates":[[[138.859125,35.105085],[138.859122,35.105062],[138.859221,35.105054],[138.859224,35.105077],[138.859125,35.105085]]],"type":"Polygon"},"id":55795,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5466","gml_id":"K17_4995012630_55795","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.859142,35.104575,138.859168,35.10466],"geometry":{"coordinates":[[[138.859143,35.10466],[138.859142,35.104575],[138.859167,35.104575],[138.859168,35.10466],[138.859143,35.10466]]],"type":"Polygon"},"id":56725,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5390","gml_id":"K17_4995012630_56725","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.85908,35.104682,138.859176,35.104709],"geometry":{"coordinates":[[[138.859083,35.104709],[138.85908,35.104689],[138.859173,35.104682],[138.859176,35.104702],[138.859083,35.104709]]],"type":"Polygon"},"id":57724,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5402","gml_id":"K17_4995012630_57724","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.859085,35.104714,138.859175,35.104738],"geometry":{"coordinates":[[[138.859089,35.104738],[138.859085,35.104719],[138.859174,35.104714],[138.859175,35.104736],[138.859089,35.104738]]],"type":"Polygon"},"id":58406,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5412","gml_id":"K17_4995012630_58406","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.858417,35.105006,138.858553,35.10503],"geometry":{"coordinates":[[[138.858419,35.10503],[138.858417,35.105017],[138.858552,35.105006],[138.858553,35.105019],[138.858419,35.10503]]],"type":"Polygon"},"id":58760,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5456","gml_id":"K17_4995012630_58760","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.859107,35.104915,138.859184,35.104943],"geometry":{"coordinates":[[[138.85911,35.104943],[138.859107,35.104921],[138.859181,35.104915],[138.859184,35.104936],[138.85911,35.104943]]],"type":"Polygon"},"id":59267,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5443","gml_id":"K17_4995012630_59267","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"},{"bbox":[138.859188,35.104571,138.859213,35.104628],"geometry":{"coordinates":[[[138.859188,35.104628],[138.859188,35.104571],[138.859212,35.104571],[138.859213,35.104628],[138.859188,35.104628]]],"type":"Polygon"},"id":60882,"properties":{"devDate":"2022-09-07","fid":"20220906-49989-12636-s-5388","gml_id":"K17_4995012630_60882","lfSpanFr":"2022-09-06","lfSpanTo":null,"name":null,"orgGILvl":"2500","orgMDId":null,"type":"普通建物","vis":null},"type":"Feature"}],"type":"FeatureCollection"}`);
        drawInputGeoJSON();
    });

</script>
{% endblock %}
